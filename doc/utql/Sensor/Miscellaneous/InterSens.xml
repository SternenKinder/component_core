<?xml version="1.0" encoding="UTF-8"?>

<UTQLPatternTemplates xmlns='http://ar.in.tum.de/ubitrack/utql'
                      xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
                      xmlns:xi='http://www.w3.org/2001/XInclude'
                      xmlns:h="http://www.w3.org/1999/xhtml"
                      xsi:schemaLocation='http://ar.in.tum.de/ubitrack/utql ../../../schema/utql_templates.xsd'>
    
    <Pattern name="InterSense" displayName="InterSense Gyroscope">
        <Description><h:p>This component provides rotation measurements from an InterSense IntertiaCube.
		The driver was tested with the Wireless InertiaCube3 which only provides 3D Rotation. Other devices can also provide position information and should work with the same driver but have not been tested.</h:p></Description>
        <Output>
            <Node name="InterSense" displayName="InterSense">
				<Attribute name="tracker" displayName="Tracker" min="0" xsi:type="IntAttributeDeclarationType">
					<Description><h:p>Optional. If not specified InterSense trackers are registered following the order of the InterSense driver.</h:p></Description>
				</Attribute>
			</Node>
            <Node name="World" displayName="InterSenseWorld">
				<!--Attribute name="receiver" displayName="Receiver" min="1" xsi:type="IntAttributeDeclarationType">
					<Description><h:p>Specifies different receivers. Func.</h:p></Description>
				</Attribute-->
			</Node>
            
            <Edge name="Rotation" source="World" destination="InterSense" displayName="Rotation">
                <Description><h:p>Rotation of InterSense with respect to World.</h:p></Description>
                <Attribute name="type" value="3DRotation" xsi:type="EnumAttributeReferenceType"/>
				<Attribute name="mode" value="push" xsi:type="EnumAttributeReferenceType"/>
            </Edge>
			<Edge name="Position" source="World" destination="InterSense" displayName="Position">
                <Description><h:p>Position of InterSense with respect to World.</h:p></Description>
                <Attribute name="type" value="3DPosition" xsi:type="EnumAttributeReferenceType"/>
				<Attribute name="mode" value="push" xsi:type="EnumAttributeReferenceType"/>
            </Edge>
			<Edge name="Output" source="World" destination="InterSense" displayName="Pose">
                <Description><h:p>Pose of InterSense with respect to World.</h:p></Description>
                <Attribute name="type" value="6D" xsi:type="EnumAttributeReferenceType"/>
				<Attribute name="mode" value="push" xsi:type="EnumAttributeReferenceType"/>
            </Edge>
        </Output>
        
        <DataflowConfiguration>
            <UbitrackLib class="InterSense"/>
        </DataflowConfiguration>
    </Pattern>
    
    <!-- Attribute declarations -->
	
    <GlobalNodeAttributeDeclarations>
        <xi:include href="file:GlobalAttrSpec.xml" xpointer="element(/1/1/1)"/>
    </GlobalNodeAttributeDeclarations>
    
    <GlobalEdgeAttributeDeclarations>
        <xi:include href="file:GlobalAttrSpec.xml" xpointer="element(/1/2/1)"/>
        <xi:include href="file:GlobalAttrSpec.xml" xpointer="element(/1/2/2)"/>
        <xi:include href="file:GlobalAttrSpec.xml" xpointer="element(/1/2/3)"/>
        <xi:include href="file:GlobalAttrSpec.xml" xpointer="element(/1/2/4)"/>
        <xi:include href="file:GlobalAttrSpec.xml" xpointer="element(/1/2/5)"/>
        <xi:include href="file:GlobalAttrSpec.xml" xpointer="element(/1/2/6)"/>
        <xi:include href="file:GlobalAttrSpec.xml" xpointer="element(/1/2/7)"/>
        <xi:include href="file:GlobalAttrSpec.xml" xpointer="element(/1/2/8)"/>
    </GlobalEdgeAttributeDeclarations> 
    
    <GlobalDataflowAttributeDeclarations>
        <!-- Unfortunately, the xpointer used in Xinclude is currently restricted to the element scheme and absolute element indices in Xerces (and thus XMLBeans) -->
        <xi:include href="file:GlobalAttrSpec.xml" xpointer="element(/1/3/1)"/>
        <xi:include href="file:GlobalAttrSpec.xml" xpointer="element(/1/3/2)"/>
    </GlobalDataflowAttributeDeclarations>
    
</UTQLPatternTemplates>

